## Lane Detection with Lidar

### Background

### 1.基于视觉系统车道线检测的缺陷

> 1. 视觉系统对背景光线敏感,阴影影响大
> 2. 视觉系统要求车道线标识完整
> 3. 视觉系统要求车道线统一(譬如颜色,宽度等)
> 4. 视觉系统在低照度环境下失效
> 5. 雨天会造成视觉系统失效(车道线表面被水覆盖)

### 2.Velodyne-16点云信息格式

Velodyne获得的直接点其数据格式为`sensor_msgs::PointCloud2`

每个点的信息为: 距离,角度(水平,垂直),强度值  

即Velodyne获得的点其数据中并不直接包含颜色信息

> 该方法正是基于velodyne返回点中强度值的不同,来进行车道线的检测.
>
> 影响强度值的因素包括颜色和材质,因此该强度值不受光线影响,在无光情况下也能进行.

### Method

> /velodyne_points ---->
>
> 1. -> 降采样(VoxelGrid) 
>
> 2. -> 最近最远点噪声剔除 
>
> 3. -> 高程信息过滤 
>
> 4. -> 左右范围粗提取 
>
> 5. -> 地面提取 
>
> 6. -> 车道线检测

1. 降采样采用体素化栅格的方法

   也可以不进行采样

2. 最近最远点删除

3. 高程信息过滤

4. 左右范围粗过滤

5. 地面提取

   代码中实现的方法为通过抽取垂直于z轴的平面特征提取道路,方法较好

   后续可以改进方案:

   ​	a) 使用聚类的方法进一步提取准确可行驶区域道路

6. 车道线检测

   代码中实现了两种方法:

   ​	a) 固定阈值的方法

   ​		该方法效果较差,手动调节阈值难度较大

   ​	b) 自适应阈值

   ​		通过提取路面点所有点的强度值,做强度值的局部均值统计,作为要提取的阈值

   ​		缺陷: 1> 如果该道路上没有车道线或车道线很不清晰,则返回到的检测点仍然为路面

   后续改进方案:

   ​	a) 参考局部均值变点检测方法

   ​	b) 对提取到的车道线的点需要进一步做过滤,比如聚类等



### 待完成

1. 对检测到的车道线做拟合,得到车道线曲率等信息
2. 根据获得的车道线计算车辆当前距离车道中心左右偏移值,当前朝向